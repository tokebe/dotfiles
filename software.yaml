---
- if:
    cond: command -v brew &> /dev/null
    unmet:
      - shell:
          - command: >
              /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
            description: Install brew package manager
            quiet: true
            stdout: true
            stderr: true
            stdin: true
      - shell:
          - command: >
              (echo; echo 'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"')
              >> /home/rebel/.bashrc && eval "$(/home/linuxbrew/.linuxbrew/bin/brew
              shellenv)"
            description: Add brew to path
            quiet: true
            stdout: true
            stderr: true
            stdin: true
      - shell:
          - command: brew analytics off
            quiet: true
- omnipkg:
    - update
    - upgrade
    - install:
        - go
        - zsh
        - gstreamer1-plugin-openh264
        - mozilla-openh264
        - unzip
        - ripgrep
        - bat
        - git-delta
        - chafa
        - [fd, fd-find]
        - [python3-dev, python3-devel]
        - [font-noto, google-noto-sans-*]
        - neofetch
        - luarocks
        - cmake
        - tldr
        - python3
        - python3-venv
        - python3-pip
        - python-is-python3
        - fontforge
        - python3-fontforge
        - cargo
        - ttfautohint
        - { brew: coreutils }
        - figlet
        - lolcat
        - xclip  # ensures nvim clipboard works in wayland
        - yank
- if:
    cond: command -v fdfind
    met:
      - if:
          cond: command -v fd &> /dev/null
          met:
            - shell:
                - command: ln -sf $(which fdfind) ~/.local/bin/fd
                  description: Fix fd access
                  quiet: true
- tap:
    - noahgorstein/tap
- brew:
    - lsd
    - fzf
    - ccat
    - jesseduffield/lazygit/lazygit
    - lazydocker
    - btop
    - nvim
    - pyenv
    - openssl # pyenv compatibility with linuxbrew
    - duf
    - pnpm
    - tcl-tk
    - onefetch
    - walk
    - lf
    - jless
    - gh
    - hyfetch
    - cpufetch
    - jqp
    - nap
    - tidy-viewer
    - xh
    - rm-improved
    - dua-cli
    - navi
    - portal
- shell:
    - command: ./zsh/setup
      description: Install ZSH for Humans
      quiet: true
      stdout: true
      stderr: true
      stdin: true
    - command: >
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh
        | bash
      description: Install nvm
      quiet: true
    - command: nvm install --lts
      description: Install latest LTS node & npm
    - command: ./git/setup
      description: Setup git ssh key
      quiet: true
      stdout: true
      stderr: true
      stdin: true
    - command: gh auth login
      description: Login to github
      quiet: true
      stdout: true
      stderr: true
      stdin: true
- ghe: [mintarchit/gh-contribs, sheepla/gh-userfetch]
- pip:
    file: python-packages.txt
- pipx:
    file: pipx-packages.txt
- shell:
    - command: zsh -c 'nvim --headless "+Lazy! sync" +qa'
      description: Prepare Neovim
      quiet: true
      stdout: true
      stderr: true
- flatpak:
    - com.discordapp.Discord
    - com.github.tchx84.Flatseal
    - com.visualstudio.code
    - md.obsidian.Obsidian
    - org.mozilla.firefox
    - app.drey.Warp
    - com.github.neithern.g4music
    - org.kde.krita
