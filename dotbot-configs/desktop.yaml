---
- if:
    cond: '[ ! -z "$XDG_CURRENT_DESKTOP" -a "$XDG_CURRENT_DESKTOP" != " " ]'
    met:
      - omnipkg:
          - onedrive  # Because I haven't gotten away from OneDrive | https://github.com/abraunegg/onedrive
          - gamemode  # Game mode utility
          - input-remapper  # Remap inputs from peripherals | https://github.com/sezanzeb/input-remapper
          - openal-soft  # Headphone virtual surround support
      - flatpak:  # For linux desktop
          - com.discordapp.Discord  # Discord | https://discord.com/
          - dev.vencord.Vesktop  # Modified Discord client | https://github.com/Vencord/Vesktop
          - com.github.finefindus.eyedropper  # Color picker | https://github.com/FineFindus/eyedropper
          - com.github.tchx84.Flatseal  # Flatpak permissions | https://github.com/tchx84/Flatseal
          - com.github.neithern.g4music  # Pretty music GUI | https://gitlab.gnome.org/neithern/g4music
          - org.kde.krita  # Art! | https://krita.org/en/
          - md.obsidian.Obsidian  # Notetaking done good | https://obsidian.md/
          - com.visualstudio.code  # One day nvim will be good for debugging | https://code.visualstudio.com/
          - io.github.zen_browser.zen  # Custom Firefox layer | https://zen-browser.app/
      - cargo: [systemctl-tui]
      - if:
          cond: '[[ "$DESKTOP_SESSION" != "kde" ]]'
          met:
            - flatpak:
                - com.usebottles.bottles  # Wine GUI | https://usebottles.com/
                - de.haeckerfelix.Fragments  # Torrent client | https://apps.gnome.org/Fragments/
                - com.mattjakeman.ExtensionManager  # Gnome extension manager | https://github.com/mjakeman/extension-manager
                - io.github.realmazharhussain.GdmSettings  # Manage Gnome greeter | https://github.com/gdm-settings/gdm-settings
                - io.gitlab.adhami3310.Impression  # Media writer | https://apps.gnome.org/Impression/
                - re.sonny.Junction  # App chooser for file opening | https://github.com/sonnyp/Junction
                - app.drey.Warp  # Like portal, but GUI | https://apps.gnome.org/Warp/
                - org.gnome.gitlab.cheywood.Buffer  # Simple throwaway text space | https://gitlab.gnome.org/cheywood/buffer
            - omnipkg:
                # Nautilus extension dependencies
                - python3-nautilus
                - python3-charset-normalizer
                - at
                - python3-polib
                - python3-gobject
                - procps-ng
                - js-jquery
            - shell:
                - description: Install Nautilus scripts
                  command: bash -c "$(curl -fsSL https://cfgnunes.github.io/nautilus-scripts/install.sh)"
                  quiet: true
                  stdout: true
                  stderr: true
                  stdin: true
                - description: Install Nautilus new file extension
                  command: curl -fsSL https://raw.githubusercontent.com/SimBoi/nautilus-create-new-file/main/install.sh
                    | bash
                  quiet: true
                  stdout: true
                  stderr: true
                  stdin: true
                - description: Install Nautilus regex search extension
                  command: curl -L -o ~/.local/share/nautilus-python/extensions/nautilus-regex-select.py
                    https://raw.githubusercontent.com/SimBoi/nautilus-regex-select/main/nautilus-regex-select.py
                  quiet: true
                  stderr: true
            - pip:
                file: python-desktop.txt
      - shell:
          - description: Install Vicinae
            command: curl -fsSL https://vicinae.com/install.sh | bash
            quiet: true
            stdout: true
            stderr: true
            stdin: true
